<!DOCTYPE HTML>
<html>
<head>
    <title>듀얼헬스케어</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
            integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
            crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <link rel='stylesheet' href='/stylesheets/style.css'/>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>

        thead {
            font-size: 18px;
        }

        .row {
            min-height: 400px;
        }

        .table-box {
            padding: 30px;
            margin: 15px;
            background-color: white;
            box-shadow: 0px 0px 20px #e6e6e6;
        }

    </style>


</head>

<body>

<!--상단 네비바-->
<header>
    <% include top-menu %>
</header>
<!--상단 네비바-->

<!--콘텐츠 내용-->
<div class="container" style="padding-top: 50px; max-width: none">
    <div class="row">
        <div class="col table-box">
            <h5><img src="images/bg_h2_tit.png" style="margin-right: 10px"> 검진현황판</h5>
        </div>
        <div class="col table-box">
            <h5><img src="images/bg_h2_tit.png" style="margin-right: 10px"> 공지사항</h5>
            <table id="noticeTable" class="table" style="margin-top: 20px">
                <thead class="thead-light">
                <tr>
                    <th scope="col">NO</th>
                    <th scope="col">제목</th>
                    <th scope="col">작성자</th>
                    <th scope="col">등록일</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col table-box">
            <h5><img src="images/bg_h2_tit.png" style="margin-right: 10px"> 담당자정보</h5>
            <table id="companyManagerTable" class="table" style="margin-top: 20px">
                <thead class="thead-light">
                <tr>
                    <th scope="col">기업명</th>
                    <th scope="col">사업장</th>
                    <th scope="col">이름</th>
                    <th scope="col">연락처</th>
                    <th scope="col">이메일</th>
                </tr>
                </thead>
            </table>
        </div>
        <div class="col table-box">
            <h5><img src="images/bg_h2_tit.png" style="margin-right: 10px"> 운영일정</h5>
            <table id="manageScheduleTable" class="table" style="margin-top: 20px">
                <thead class="thead-light">
                <tr>
                    <th scope="col">병원명</th>
                    <th scope="col">고객사</th>
                    <th scope="col">사업장</th>
                    <th scope="col">오픈일</th>
                    <th scope="col">마감일</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>
<!--콘텐츠 내용-->

</body>

</html>


<script type="text/javascript">

    //공지사항
    function setNoticeData(data) {
        for (i = 0; i < data.length; i++) {
            var html = '';
            html += '<tr>';
            html += '<td>' + data[i].id + '</td>';
            html += '<td>' + data[i].title + '</td>';
            html += '<td>' + data[i].author + '</td>';
            html += '<td>' + data[i].createDate + '</td>';
            html += '</tr>';

            $("#noticeTable").append(html);
        }
    }

    //담당자정보
    function setCompanyManagerData(data) {
        for (i = 0; i < data.length; i++) {
            var html = '';
            html += '<tr>';
            html += '<td>' + data[i].companyName + '</td>';
            html += '<td>' + data[i].companyBranch + '</td>';
            html += '<td>' + data[i].name + '</td>';
            html += '<td>' + data[i].phone + '</td>';
            html += '<td>' + data[i].email + '</td>';
            html += '</tr>';

            $("#companyManagerTable").append(html);
        }
    }

    //운영일정
    function setManageScheduleData(data) {
        for (i = 0; i < data.length; i++) {
            var html = '';
            html += '<tr>';
            html += '<td>' + data[i].hospitalName + '</td>';
            html += '<td>' + data[i].companyName + '</td>';
            html += '<td>' + data[i].companyBranch + '</td>';
            html += '<td>' + data[i].reservationStartDate + '</td>';
            html += '<td>' + data[i].reservationEndDate + '</td>';
            html += '</tr>';

            $("#manageScheduleTable").append(html);
        }
    }

    var token = "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJMU0giLCJleHAiOjE2MDMwOTU5MzJ9.ZrwYNSVhfzpHPxEI01PQ757Z7hvaFr1jDRiEvKFvb7U";
    const instance = axios.create({
        baseURL: 'http://192.168.219.106:8080/master/api/v1/',
        timeout: 1000,
        headers: {'token': token}
    });
    //공지사항
    instance.post('M002002_RES').then(res => {
        setNoticeData(res.data);
    });
    //담당자정보
    instance.post('M002003_RES').then(res => {
        setCompanyManagerData(res.data);
    });
    //운영일정
    instance.post('M002004_RES').then(res => {
        setManageScheduleData(res.data);
    });

</script>
